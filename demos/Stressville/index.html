<!DOCTYPE html>
<html>
	<head>
		<title>Stressvile - RacoonJS</title>
		<meta charset="UTF-8" />
		<script src="stressville.js"></script>
		<script src="racoon.js"></script>
	</head>
	<body>
		<canvas id="canvas"></canvas>
		<script type="text/javascript">
			(function () {
				var img = new Image();
				img.src = './img/map.png';
				var plar = new Image();
				plar.src = './img/hero.png';
				var gui = new Image();
				gui.src = './img/gui.png';
				var decor = new Image();
				decor.src = './img/decor.png';
				var sky = new Image();
				sky.src = './img/sky.png';
				var pistol = new Image();
				pistol.src = './img/pistol.png';
				
				var Game = new RJ.Game();
				var winSize = null;
				
				Game.init({
					canvas: "canvas",
					size: size(640,480),
					rate: 60
				});
				Game.ctx.webkitImageSmoothingEnabled = false;
				winSize = Game.winSize();
				
				var GUI = new RJ.GameObject({
					name: "GUI",
					pos: vecNull(),
					size: size(640,480),
					enter: function () {
						var Stressbar = new SV.Stressbar({
							name: "Stressbar",
							image: gui,
							pos: vecNull(),
							size: size(92,32),
						});
						
						var Timebar = new SV.Timebar({
							name: "Timebar",
							image: gui,
							pos: vec2(0,448),
							size: size(92,32),
						});
						
						this.addChild(Stressbar);
						this.addChild(Timebar);
					}
				});
				
				var GameScene = new RJ.Scene({
					name: "GameScene",
					enter: function () {
						var level = new SV.Level({
							image: img,
							name: "Level",
						});
						
						var decors = new SV.Decorations({
							image: decor,
						});
						
						var skie = new SV.Sky({
							name: "Sky",
							pos: vec2(1344,64),
							image: sky,
							size: size(128,196),
						});
						
						var player =  new SV.Player({
							name: "Player",
							pos: vec2(288,354),
							anchor: vec2(0.5,1),
							image: plar,
							pistol: pistol,
						});
						decors.player = player;
						
						var blood = new SV.Blood({
							name: "Blood",
							pos: vecNull(),
							size: size(0,0),
						});
						player.blood = blood;
						
						this.addChild(skie);
						this.addChild(level);
						this.addChild(decors);
						this.addChild(blood);
						this.addChild(player);
					},
				});
				
				Game.addChild(GameScene);
				Game.addChild(GUI);
				//Game.turnOnDebug();
				//Game.showFPS();
			})();
		</script>
	</body>
</html>